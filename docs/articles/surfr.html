<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to make surfer profile plots • rivRmon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to make surfer profile plots">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-147990841-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147990841-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rivRmon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dbca-wa/rivRmon/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to make surfer profile plots</h1>
                        <h4 data-toc-skip class="author">Bart
Huntley</h4>
            
            <h4 data-toc-skip class="date">2024-11-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dbca-wa/rivRmon/blob/HEAD/vignettes/surfr.Rmd" class="external-link"><code>vignettes/surfr.Rmd</code></a></small>
      <div class="hidden name"><code>surfr.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Surfer or profile plots are visualisations of 4 physical and chemical
metrics along the Swan and Canning rivers. These metrics are, salinity,
dissolved oxygen, chlorophyll and temperature and are interpolated along
the river length to give a seamless visualisation.</p>
<p>Two sections of the Swan/Canning river system are monitored on a
weekly basis. The Canning river estuary (between South Canning Bridge
and Ellison drive) and the Swan river estuary (between Blackwall Reach
and the Power Line crossing in West Swan).</p>
<p>The raw input to create these plots comes from sonde data recorders
deployed on consecutive days each week. Due to the length of time needed
sample either of the rivers, two vessels start at different locations to
enable recording of data in the one day. Therefore the raw data for one
day’s sampling is two excel spreadsheets.</p>
</div>
<div class="section level2">
<h2 id="creating-a-surfer-plot">Creating a surfer plot<a class="anchor" aria-label="anchor" href="#creating-a-surfer-plot"></a>
</h2>
<p>The functions to create the surfer plots are slightly different
internally. It is important to note that these functions are very
specific to the river and the expected inputs and parameters.</p>
<p>To run the functions make sure the package is loaded. The path
variable is a character string of the file path to the locations of the
sonde data for the day you wish to plot. As described above there should
be two excel spreadsheets. Make sure that you have the right data for
the right function. Sonde data has a “c” in the name for the Canning and
a “s” for the Swan. Please ensure that if you copy and paste in a file
path from a Windows OS you will need to either double up the backslashes
or convert them to a single forward slash.</p>
<p>The other two parameters supplied to either function relate to the
oxygenation status at two locations and are specific to each river.
Permissable colours are green, blue and red.</p>
<p>When run the function will read in the sonde data, process the
interpolations and generate the plots. The plots will be written to a
directory created at the same location as the sonde data, called
“plots”. Examples below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dbca-wa/rivRmon" class="external-link">rivRmon</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Canning river - forward slash example</span></span>
<span><span class="fu"><a href="../reference/canning_surfR.html">canning_surfR</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"C:blah/blah/data_location"</span>, obac <span class="op">=</span> <span class="st">"green"</span>, onic <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Swan river - backslash example</span></span>
<span><span class="fu"><a href="../reference/swan_surfR.html">swan_surfR</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"C:blah\\blah\\data_location"</span>, ovit <span class="op">=</span> <span class="st">"blue"</span>, ocav <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="canning-river-example">Canning river example<a class="anchor" aria-label="anchor" href="#canning-river-example"></a>
</h3>
<p>This plot was produced using the parameters as described above on
data from 23/07/2019 using the <code><a href="../reference/canning_surfR.html">canning_surfR()</a></code> function.
Note that the block-like structure downstream of site KEN represents the
Kent street weir in an open position. The function will interpret the
status of the weir from the sonde data and plot it accordingly.</p>
<p><img src="plots%2Fcanning.PNG"></p>
</div>
<div class="section level3">
<h3 id="swan-river-examples">Swan river examples<a class="anchor" aria-label="anchor" href="#swan-river-examples"></a>
</h3>
<p>When the <code><a href="../reference/swan_surfR.html">swan_surfR()</a></code> function is run, it produces two
outputs. One is a visualisation of the whole river from the river mouth
to the Power Lines and the other is a zoomed view from the Narrows to
the Power Lines. This to enable a more detailed view of the shallower
waters.</p>
<p>Again these examples are run using the parameters as described above.
Note the blacked out portions at the beginning of the plot. Blacked out
regions cover sections of the river where data was not collected on that
date. The sites here (FP1 and FP7) are within the Port of Fremantle and
data is sometimes provided. Other sections of the river may be blacked
out from time to time and could be due to equipment malfunction or more
generally an inability to hold station at a site due to conditions on
the day (strong wind, strong current etc).</p>
<p><img src="plots%2Fswan.PNG"></p>
<p>And here is an example of the middle and upper Swan showing greater
detail.</p>
<p><img src="plots%2Fupper.PNG"></p>
</div>
</div>
<div class="section level2">
<h2 id="things-to-note">Things to note<a class="anchor" aria-label="anchor" href="#things-to-note"></a>
</h2>
<ul>
<li><p>The current functions can handle the outputs from YSI and EXO
sondes and can handle most of the historical differences in metric
naming conventions and output formats. It is recommended however that
the current conventions in place for naming and editing the sonde
outputs should be maintained. Any major deviations or additions will
likely result in errors.</p></li>
<li><p>The rendering of the “river bottom” is designed around long term
monitoring locations. If a new site needs to be added this will require
some rewriting of various parts of the base code and internal data sets.
If this need arises please contact the author.</p></li>
<li><p>The “river bottom” has been created by extracting depths from the
Corporate bathymetry data along a reckoned navigation route that
attempts to stick to the deepest sections of the river and intersects
the sampling sites. Additional extraction points are generated at 100
meter intervals along this route.</p></li>
<li><p>When the <code><a href="../reference/canning_surfR.html">canning_surfR()</a></code> function detects that the
weir is closed (by the presence of cannoxy site data), it performs two
interpolations to ensure that the weir is used as a barrier to the
interpolations.</p></li>
<li><p>A thin plate spline is used to calculate the interpolation of
data between the sampling sites.</p></li>
<li><p>Remember that this is a visualisation tool only. Obtaining
precise measurements of metrics outside of sampling sites can only be
obtained by physically sampling those areas. Any interpolation can only
be an estimation, particularly with such sparse input data.</p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Bart Huntley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
